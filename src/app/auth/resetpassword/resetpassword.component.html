<div style="background-color: white">
  <div class="container MM_signInContainer">
    <div class="row">
      <div class="col-sm-12 col-md-6 col-lg-4 mx-auto text-center mt-3 mb-3">
        <a [routerLink]="['']">
          <img
            src="../../../assets/images/logo/Amazon_logo.png"
            alt=""
            width="30%"
            height="auto"
          />
        </a>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-12 col-md-6 col-lg-4 mx-auto MM_signInCard">
        <div class="card">
          <div class="card-body">
            <form *ngIf="type == 'enterMail'" #emailForm="ngForm">
              <div class="mb-3">
                <p class="fs-3">Reset Password</p>

                <div
                  [ngClass]="{
                    invalid: UserEmail.invalid && UserEmail.touched
                  }"
                >
                  <label for="exampleInputEmail1" class="form-label"
                    >Enter your Email
                  </label>
                  <input
                    required
                    minlength="10"
                    maxlength="30"
                    [(ngModel)]="person.email"
                    #UserEmail="ngModel"
                    type="email"
                    class="form-control"
                    name="email"
                    id="inputEmail"
                    [disabled]="emailStatus == EmailStatus.found"
                  />
                  <span *ngIf="UserEmail.invalid && UserEmail.touched"
                    >This Field is Required</span
                  >

                  <div
                    *ngIf="emailStatus == EmailStatus.notFound"
                    class="alert alert-warning mt-3"
                    role="alert"
                  >
                    This Email is not regesitred!
                  </div>

                  <div
                    *ngIf="emailStatus == EmailStatus.found"
                    class="alert alert-success mt-3"
                    role="alert"
                  >
                    Please check your mail
                  </div>
                </div>
              </div>

              <button
                *ngIf="emailStatus != EmailStatus.found"
                type="button"
                class="btn col-12 mb-3"
                (click)="ResetPassword()"
              >
                Reset Password
              </button>
            </form>
            <form *ngIf="type == 'enterNewPassword'" #newPasswordForm="ngForm">
              <div class="mb-3">
                <p class="fs-3">Reset Password</p>

                <div
                  [ngClass]="{
                    invalid: UserPassword.invalid && UserPassword.touched
                  }"
                >
                  <label for="exampleInputEmail1" class="form-label"
                    >Enter your new password
                  </label>
                  <input
                    required
                    minlength="10"
                    maxlength="30"
                    [(ngModel)]="person.password"
                    #UserPassword="ngModel"
                    type="password"
                    class="form-control"
                    name="password"
                    id="inputPassword"
                  />
                  <div *ngIf="!UserPassword.value && UserPassword.touched">
                    This Field is Required
                  </div>
                  <div *ngIf="UserPassword.invalid && UserPassword.touched">
                    Password length must be 10 charcters at least
                  </div>
                  <label for="inputPassword" class="form-label mt-3"
                    >Repeat your new password
                  </label>
                  <input
                    required
                    minlength="10"
                    maxlength="30"
                    [(ngModel)]="person.repeatedPassword"
                    #UserRPassword="ngModel"
                    type="password"
                    class="form-control"
                    name="Rpassword"
                    id="inputRPassword"
                  />
                  <div *ngIf="!UserRPassword.value && UserRPassword.touched">
                    This Field is Required
                  </div>

                  <div
                    *ngIf="
                      UserRPassword.value != UserPassword.value &&
                      UserRPassword.touched
                    "
                    class="alert alert-danger fs-6 mt-3"
                    role="alert"
                  >
                    <i
                      style="color: rgb(119, 6, 6)"
                      class="fas fa-times-circle"
                    ></i>
                    The two passwords don't match!
                  </div>

                  <div
                    *ngIf="emailStatus == EmailStatus.found"
                    class="alert alert-success mt-3"
                    role="alert"
                  >
                    Please check your mail
                  </div>
                </div>
              </div>
              <div
                *ngIf="updatedPasswordMsg"
                [ngClass]="
                  updatedPasswordMsg['result'] == 'failed'
                    ? 'alert-danger'
                    : 'alert-success'
                "
                class="alert mt-3"
                role="alert"
              >
                {{ updatedPasswordMsg["message"] }}
              </div>

              <button
                [disabled]="newPasswordForm.invalid"
                type="button"
                class="btn col-12 mb-3"
                (click)="assignNewPassword()"
              >
                Save New Password
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div
        class="col-sm-12 col-md-6 col-lg-4 mx-auto text-center mt-4 mb-2 MM_newToAmazon"
      >
        <p><span> New to Amazon? </span></p>
        <a [routerLink]="['/register']">
          <button type="submit" class="btn bg-gradient col-12 p-1">
            Create your Amazon account
          </button></a
        >
      </div>
    </div>
    <div class="row">
      <div
        class="col-sm-12 col-md-8 col-lg-6 mx-auto text-center MM_buttomRights"
      >
        <hr />
        <a href="#">Conditions</a>
        <a href="#">Privacy Notice</a>
        <a href="#">Help</a>
        <p class="mt-3 text-muted">
          Â© 1996-2020, Amazon.com, Inc. or its affiliates
        </p>
      </div>
    </div>
  </div>
</div>
